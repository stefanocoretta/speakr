<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Run Praat in R • speakr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
<!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Run Praat in R">
<meta property="og:description" content="speakr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">speakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/run-praat.html">Run Praat in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/stefanocoretta/speakr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        


      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="run-praat_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Run Praat in R</h1>
                        <h4 class="author">Stefano Coretta</h4>
            
            <h4 class="date">2021-03-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/stefanocoretta/speakr/blob/master/vignettes/run-praat.Rmd"><code>vignettes/run-praat.Rmd</code></a></small>
      <div class="hidden name"><code>run-praat.Rmd</code></div>

    </div>

    
    
<p>The package speakr allows the user to run a Praat script from within R, optionally passing parameters to the script if a form is used. In combination with rmarkdown::render(), it is possible to generate dynamic reports which include phonetic analyses.</p>
<p>Load the package with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/stefanocoretta/speakr">speakr</a></span><span class="op">)</span></code></pre></div>
<div id="run-a-praat-script" class="section level2">
<h2 class="hasAnchor">
<a href="#run-a-praat-script" class="anchor"></a>Run a Praat script</h2>
<p>To run a Praat script, use the function <code><a href="../reference/praat_run.html">praat_run()</a></code>. The first argument of the function is the path to the script.</p>
<p>For example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"play-greetings.praat"</span>, package <span class="op">=</span> <span class="st">"speakr"</span><span class="op">)</span>

<span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span><span class="op">)</span></code></pre></div>
<p>If the script has side effects, like creating new files or editing existing ones, these effects will take place.</p>
</div>
<div id="file-output" class="section level2">
<h2 class="hasAnchor">
<a href="#file-output" class="anchor"></a>File output</h2>
<p>If the script logs text (like a set of acoustic measurements) to a file (with <code>writeFile[Line]</code> and <code>appendFile[Line]</code>), the file is created in the directory specified in the script, and nothing is returned in R. To load the results file in R, just read it in as you would with any other dataset.</p>
<p>The following runs a script that gets formant values and outputs a file with the formant measurements in your home folder.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"get-formants.praat"</span>, package <span class="op">=</span> <span class="st">"speakr"</span><span class="op">)</span>

<span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span><span class="op">)</span></code></pre></div>
</div>
<div id="praat-info-window-output" class="section level2">
<h2 class="hasAnchor">
<a href="#praat-info-window-output" class="anchor"></a>Praat Info window output</h2>
<p>If, on the other hand, the script logs output to the Info window (with <code>writeInfo[Line]</code> and <code>appendInfo[Line]</code>), the output will be sent to the R console.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"get-formants-capt.praat"</span>, package <span class="op">=</span> <span class="st">"speakr"</span><span class="op">)</span>

<span class="co"># Output to R console</span>
<span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; vowel,F1,F2,F3 a,784.4671170665314,1390.927070235929,2433.2403445805335 e,417.00791908249613,2042.453249988405,2423.8583300060627 i,259.0985814360339,2231.740765785137,2819.218714861659 o,562.2955245317842,854.5311682738487,2463.26727657427 u,434.4420321283883,1331.362161871936,2815.9876831692327</code></pre>
<p>You can use <code>capture = TRUE</code> in <code><a href="../reference/praat_run.html">praat_run()</a></code> to capture the output and pass it to an R variable. The output will be a character string.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Output to R variable</span>
<span class="va">formants</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span>, capture <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">formants</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; vowel,F1,F2,F3 a,784.4671170665314,1390.927070235929,2433.2403445805335 e,417.00791908249613,2042.453249988405,2423.8583300060627 i,259.0985814360339,2231.740765785137,2819.218714861659 o,562.2955245317842,854.5311682738487,2463.26727657427 u,434.4420321283883,1331.362161871936,2815.9876831692327</code></pre>
<p>Of course, you can redirect the captured output using the pipe <code>%&gt;%</code>, for example to read the output as a tibble.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co"># Output to R tibble</span>
<span class="va">formants</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span>, capture <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">formants</span><span class="op">)</span>
<span class="fu">glimpse</span><span class="op">(</span><span class="va">formants</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"
#&gt; Rows: 5
#&gt; Columns: 4
#&gt; $ vowel &lt;chr&gt; "a", "e", "i", "o", "u"
#&gt; $ F1    &lt;dbl&gt; 784.4671, 417.0079, 259.0986, 562.2955, 434.4420
#&gt; $ F2    &lt;dbl&gt; 1390.9271, 2042.4532, 2231.7408, 854.5312, 1331.3622
#&gt; $ F3    &lt;dbl&gt; 2433.240, 2423.858, 2819.219, 2463.267, 2815.988</code></pre>
</div>
<div id="script-arguments-using-praat-forms" class="section level2">
<h2 class="hasAnchor">
<a href="#script-arguments-using-praat-forms" class="anchor"></a>Script arguments using Praat forms</h2>
<p>It is possible to pass arguments to the script from R, using Praat <code>form</code>s in the script. The following example runs the script <code>get-formants-args.praat</code>, which requires two arguments: unit (a string, either <code>"Hertz"</code> or <code>"Bark"</code>) and window size (a number). Multiple arguments can be specified in <code><a href="../reference/praat_run.html">praat_run()</a></code>, in the order in which they appear in the <code>form</code>. These arguments will be passed to the <code>form</code> in the script.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">script</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"get-formants-args.praat"</span>, package <span class="op">=</span> <span class="st">"speakr"</span><span class="op">)</span>

<span class="va">unit</span> <span class="op">=</span> <span class="st">"Bark"</span>
<span class="va">window</span> <span class="op">=</span> <span class="fl">0.02</span>

<span class="va">f_bark</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/praat_run.html">praat_run</a></span><span class="op">(</span><span class="va">script</span>, <span class="va">unit</span>, <span class="va">window</span>, capture <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">f_bark</span>, <span class="st">"args"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="va">unit</span>, window <span class="op">=</span> <span class="va">window</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; 
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; cols(
#&gt;   vowel = col_character(),
#&gt;   F1 = col_double(),
#&gt;   F2 = col_double(),
#&gt;   F3 = col_double()
#&gt; )</code></pre>
<p>Let’s have a look at <code>f_bark</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">f_bark</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   vowel    F1    F2    F3</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 a      7.16 10.5   14.2</span>
<span class="co">#&gt; 2 e      4.24 13.0   14.2</span>
<span class="co">#&gt; 3 i      2.72 13.6   15.2</span>
<span class="co">#&gt; 4 o      5.46  7.61  14.3</span>
<span class="co">#&gt; 5 u      4.28  9.12  15.1</span></code></pre></div>
<p>And plot it.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">f_bark</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">F2</span>, <span class="va">F1</span>, label <span class="op">=</span> <span class="va">vowel</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_label</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>
    title <span class="op">=</span> <span class="st">"Vowel plot"</span>,
    x <span class="op">=</span> <span class="st">"F2 (Bark)"</span>,
    y <span class="op">=</span> <span class="st">"F1 (Bark)"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_reverse</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"top"</span>, limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_reverse</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"right"</span>, limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="run-praat_files/figure-html/f-bark-plot-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Stefano Coretta.</p>
</div>

<div class="pkgdown">
  <p>Made with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1, using <a href="https://preferably.amirmasoudabdol.name/?source=footer">preferably</a> template.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
